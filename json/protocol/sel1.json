{

	"__software": "SEL hub-node communication",
	"__protocol": 1,
	"__website": "https://github.com/sel-project/sel-utils",

	"encoding": {

		"endianness": {
			"*": "big-endian"
		},

		"id": "ubyte",

		"array_length": "varuint",

		"types": {

			"plugin": {
				"type": "struct",
				"fields": [
					{
						"name": "name",
						"type": "string"
					},
					{
						"name": "version",
						"type": "string"
					}
				]
			},

			"address": {
				"type": "struct",
				"fields": [
					{
						"name": "is_ipv6",
						"type": "bool"
					},
					{
						"name": "bytes4",
						"when": "is_ipv6==false",
						"type": "ubyte[4]"
					},
					{
						"name": "bytes6",
						"when": "is_ipv6==true",
						"type": "ubyte[16]"
					},
					{
						"name": "port",
						"type": "ushort"
					}
				]
			},

			"skin": {
				"type": "struct",
				"fields": [
					{
						"name": "is_empty",
						"type": "bool"
					},
					{
						"name": "name",
						"when": "is_empty==false",
						"type": "string"
					},
					{
						"name": "data",
						"when": "is_empty==false",
						"type": "ubyte[]"
					}
				]
			},

			"logged_message": {
				"type": "struct",
				"fields": [
					{
						"name": "timestamp",
						"type": "ulong"
					},
					{
						"name": "logger",
						"type": "string"
					},
					{
						"name": "message",
						"type": "string"
					}
				]
			},

			"player": {
				"type": "struct",
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "position",
						"type": "float<xyz>"
					}
				]
			}

		}

	},

	"packets": {

		"login": {

			"connection": {
				"id": 1,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "protocol",
						"type": "varuint"
					},
					{
						"name": "name",
						"type": "string"
					},
					{
						"name": "main_node",
						"type": "bool"
					}
				]
			},

			"connection_response": {
				"id": 2,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "protocol_accepted",
						"type": "bool"
					},
					{
						"name": "name_accepted",
						"type": "bool"
					}
				]
			},

			"generic_info": {
				"id": 11,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "online_mode",
						"type": "bool"
					},
					{
						"name": "display_name",
						"type": "string"
					},
					{
						"name": "language",
						"type": "string"
					},
					{
						"name": "accepted_language",
						"type": "string[]"
					},
					{
						"name": "web_port",
						"type": "ushort"
					},
					{
						"name": "json_data",
						"type": "string"
					}
				]
			},

			"game_info": {
				"id": 12,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "last",
						"type": "bool"
					},
					{
						"name": "game",
						"type": "ubyte"
					},
					{
						"name": "protocols",
						"type": "varuint[]"
					},
					{
						"name": "motd",
						"type": "string"
					},
					{
						"name": "port",
						"type": "ushort"
					}
				]
			},

			"ready": {
				"id": 15,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "plugins",
						"type": "plugin[]"
					}
				]
			}

		},

		"status": {

			"status": {
				"id": 13,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "online",
						"type": "varuint"
					},
					{
						"name": "max",
						"type": "varuint"
					}
				]
			},

			"nodes": {
				"id": 14,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "nodes",
						"type": "string[]"
					}
				]
			},

			"update_nodes": {
				"id": 15,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "type",
						"type": "ubyte"
					},
					{
						"name": "node",
						"type": "string"
					}
				]
			},

			"server_resource_usage": {
				"id": 16,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "tps",
						"type": "float"
					},
					{
						"name": "ram_used",
						"type": "ulong"
					},
					{
						"name": "cpu_used",
						"type": "float"
					}
				]
			}

		},

		"play": {

			"add_player": {
				"id": 21,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "reason",
						"type": "ubyte"
					},
					{
						"name": "protocol",
						"type": "varuint"
					},
					{
						"name": "username",
						"type": "string"
					},
					{
						"name": "display_name",
						"type": "string"
					},
					{
						"name": "address",
						"type": "address"
					},
					{
						"name": "game",
						"type": "ubyte"
					},
					{
						"name": "uuid",
						"type": "uuid"
					},
					{
						"name": "skin",
						"type": "skin"
					},
					{
						"name": "ping",
						"type": "varuint"
					},
					{
						"name": "language",
						"type": "string"
					}
				],
				"variants": {
					"field": "game",
					"values": {
						"pocket": {
							"value": 1,
							"fields": [
								{
									"name": "packet_loss",
									"type": "float"
								}
							]
						},
						"minecraft": {
							"value": 2,
							"fields": [
								{
									"name": "signature",
									"type": "string"
								}
							]
						}
					}
				}
			},

			"kick_player": {
				"id": 22,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "reason",
						"type": "string"
					},
					{
						"name": "translation",
						"type": "bool"
					}
				]
			},

			"player_disconnected": {
				"id": 23,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "reason",
						"type": "ubyte"
					}
				]
			},

			"transfer_player": {
				"id": 24,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "node",
						"type": "string"
					}
				]
			},

			"update_player_language": {
				"id": 25,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "language",
						"type": "string"
					}
				]
			},

			"update_player_display_name": {
				"id": 26,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "display_name",
						"type": "string"
					}
				]
			},

			"game_packet": {
				"id": 31,
				"clientbound": true,
				"serverbound": true,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "packet",
						"type": "remaining_bytes"
					}
				]
			},

			"game_packets": {
				"id": 33,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "packets",
						"type": "ubyte[][]"
					}
				]
			},

			"remote_command": {
				"id": 32,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "origin",
						"type": "ubyte"
					},
					{
						"name": "sender",
						"type": "address"
					},
					{
						"name": "command",
						"type": "string"
					}
				]
			},

			"update_player_ping": {
				"id": 41,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "ping",
						"type": "varuint"
					}
				]
			},

			"update_player_packet_loss": {
				"id": 42,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "packet_loss",
						"type": "float"
					}
				]
			},

			"log": {
				"id": 51,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "message",
						"type": "logged_message"
					}
				]
			},

			"logs": {
				"id": 52,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "messages",
						"type": "logged_message[]"
					}
				]
			},

			"request_worlds": {
				"id": 61,
				"clientbound": true,
				"serverbound": false,
				"fields": []
			},

			"worlds_list": {
				"id": 62,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "worlds",
						"type": "string[]"
					}
				]
			},

			"start_tracking": {
				"id": 63,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "world",
						"type": "string"
					},
					{
						"name": "center",
						"type": "int<xz>"
					},
					{
						"name": "radius",
						"type": "varuint"
					}
				]
			},

			"stop_tracking": {
				"id": 64,
				"clientbound": true,
				"serverbound": false,
				"fields": []
			},

			"tracking_error": {
				"id": 65,
				"clientbound": false,
				"serverbound": true,
				"fields": []
			},

			"tracking_data_add_players": {
				"id": 66,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "players",
						"type": "player[]"
					}
				]
			},

			"tracking_data_remove_players": {
				"id": 67,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "players",
						"type": "varuint[]"
					}
				]
			},

			"tracking_data_move_players": {
				"id": 68,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "players",
						"type": "player[]"
					}
				]
			}

		}

	}

}
