{

	"__software": "Hub-Node Communication",
	"__protocol": 1,
	"__website": "https://github.com/sel-project/sel-utils",

	"encoding": {

		"endianness": {
			"*": "big_endian"
		},

		"id": "ubyte",

		"array_length": "varuint",

		"types": {

			"plugin": [
				{
					"name": "name",
					"type": "string"
				},
				{
					"name": "version",
					"type": "string"
				}
			],

			"address": [
				{
					"name": "bytes",
					"type": "ubyte[]"
				},
				{
					"name": "port",
					"type": "ushort"
				}
			],

			"game": [
				{
					"name": "type",
					"type": "ubyte",
					"constants": {
						"pocket": 1,
						"minecraft": 2
					}
				},
				{
					"name": "protocols",
					"type": "varuint[]"
				},
				{
					"name": "motd",
					"type": "string"
				},
				{
					"name": "port",
					"type": "ushort"
				}
			],

			"skin": [
				{
					"name": "name",
					"type": "string"
				},
				{
					"name": "data",
					"type": "ubyte[]"
				}
			],

			"log": [
				{
					"name": "timestamp",
					"type": "ulong"
				},
				{
					"name": "logger",
					"type": "string"
				},
				{
					"name": "message",
					"type": "string"
				}
			]

		}

	},

	"packets": {

		"login": {

			"connection_request": {
				"id": 0,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "protocol",
						"type": "varuint"
					},
					{
						"name": "password",
						"type": "string"
					},
					{
						"name": "name",
						"type": "string"
					},
					{
						"name": "main",
						"type": "bool"
					}
				]
			},

			"connection_response": {
				"id": 1,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "protocol",
						"type": "varuint"
					},
					{
						"name": "status",
						"type": "ubyte",
						"constants": {
							"ok": 0,
							"outdated_hub": 1,
							"outdated_node": 2,
							"password_required": 3,
							"wrong_password": 4,
							"invalid_name_length": 5,
							"invalid_name_characters": 6,
							"name_already_used": 7,
							"name_reserved": 8
						}
					}
				]
			},

			"hub_info": {
				"id": 2,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "time",
						"type": "varulong"
					},
					{
						"name": "server_id",
						"type": "varulong"
					},
					{
						"name": "reserved_uuids",
						"type": "varulong"
					},
					{
						"name": "display_name",
						"type": "string"
					},
					{
						"name": "online_mode",
						"type": "bool"
					},
					{
						"name": "games",
						"type": "game[]"
					},
					{
						"name": "online",
						"type": "varuint"
					},
					{
						"name": "max",
						"type": "varuint"
					},
					{
						"name": "language",
						"type": "string"
					},
					{
						"name": "accepted_languages",
						"type": "string[]"
					},
					{
						"name": "nodes",
						"type": "string[]"
					},
					{
						"name": "social_json",
						"type": "string"
					},
					{
						"name": "additional_json",
						"type": "string"
					}
				]
			},

			"node_info": {
				"id": 3,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "time",
						"type": "varulong"
					},
					{
						"name": "plugins",
						"type": "plugin[]"
					}
				]
			}

		},

		"status": {

			"players": {
				"id": 4,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "online",
						"type": "varuint"
					},
					{
						"name": "max",
						"type": "varuint"
					}
				]
			},

			"nodes": {
				"id": 5,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "action",
						"type": "ubyte",
						"constants": {
							"add": 0,
							"remove": 1
						}
					},
					{
						"name": "node",
						"type": "string"
					}
				]
			},

			"resources_usage": {
				"id": 6,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "tps",
						"type": "float"
					},
					{
						"name": "ram",
						"type": "varulong"
					},
					{
						"name": "cpu",
						"type": "float"
					}
				]
			}

		},

		"generic": {

			"logs": {
				"id": 7,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "messages",
						"type": "log[]"
					}
				]
			},

			"remote_command": {
				"id": 8,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "origin",
						"type": "ubyte",
						"constants": {
							"hub": 0,
							"external_console": 1,
							"rcon": 2
						}
					},
					{
						"name": "sender",
						"type": "address"
					},
					{
						"name": "command",
						"type": "string"
					}
				]
			},

			"update_list": {
				"id": 9,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "list",
						"type": "ubyte",
						"constants": {
							"whitelist": 0,
							"blacklist": 1
						}
					},
					{
						"name": "action",
						"type": "ubyte",
						"constants": {
							"add": 0,
							"remove": 1
						}
					},
					{
						"name": "type",
						"type": "ubyte"
					}
				],
				"variants": {
					"field": "type",
					"values": {
						"by_hub_id": {
							"value": 0,
							"fields": [
								{
									"name": "hub_id",
									"type": "varuint"
								}
							]
						},
						"by_name": {
							"value": 1,
							"fields": [
								{
									"name": "username",
									"type": "string"
								}
							]
						},
						"by_uuid": {
							"value": 2,
							"fields": [
								{
									"name": "game",
									"type": "ubyte",
									"constants": {
										"pocket": 1,
										"minecraft": 2
									}
								},
								{
									"name": "uuid",
									"type": "uuid"
								}
							]
						}
					}
				}
			},

			"reload": {
				"id": 10,
				"clientbound": true,
				"serverbound": false,
				"fields": []
			}

		},

		"player": {

			"add": {
				"id": 11,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "reason",
						"type": "ubyte",
						"constants": {
							"first_join": 0,
							"transferred": 1,
							"forcibly_transferred": 2
						}
					},
					{
						"name": "game",
						"type": "ubyte"
					},
					{
						"name": "protocol",
						"type": "varuint"
					},
					{
						"name": "username",
						"type": "string"
					},
					{
						"name": "display_name",
						"type": "string"
					},
					{
						"name": "address",
						"type": "address"
					},
					{
						"name": "uuid",
						"type": "uuid"
					},
					{
						"name": "skin",
						"type": "skin"
					},
					{
						"name": "latency",
						"type": "varuint"
					},
					{
						"name": "language",
						"type": "string"
					}
				],
				"variants": {
					"field": "game",
					"values": {
						"pocket": {
							"value": 1,
							"fields": [
								{
									"name": "xuid",
									"type": "varlong"
								},
								{
									"name": "packet_loss",
									"type": "float"
								}
							]
						},
						"minecraft": {
							"value": 2,
							"fields": []
						}
					}
				}
			},

			"remove": {
				"id": 12,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "reason",
						"type": "ubyte",
						"constants": {
							"left": 0,
							"timed_out": 1,
							"kicked": 2,
							"transferred": 3
						}
					}
				]
			},

			"kick": {
				"id": 13,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "reason",
						"type": "string"
					},
					{
						"name": "translation",
						"type": "bool"
					},
					{
						"name": "parameters",
						"type": "string[]",
						"when": "translation==true"
					}
				]
			},

			"transfer": {
				"id": 14,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "node",
						"type": "string"
					}
				]
			},

			"update_language": {
				"id": 15,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "language",
						"type": "string"
					}
				]
			},

			"update_display_name": {
				"id": 16,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "display_name",
						"type": "string"
					}
				]
			},

			"update_latency": {
				"id": 17,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "latency",
						"type": "varuint"
					}
				]
			},

			"update_packet_loss": {
				"id": 18,
				"clientbound": true,
				"serverbound": false,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "packet_loss",
						"type": "float"
					}
				]
			},

			"game_packet": {
				"id": 19,
				"clientbound": true,
				"serverbound": true,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "packet",
						"type": "bytes"
					}
				]
			},

			"ordered_game_packet": {
				"id": 20,
				"clientbound": false,
				"serverbound": true,
				"fields": [
					{
						"name": "hub_id",
						"type": "varuint"
					},
					{
						"name": "order",
						"type": "varuint"
					},
					{
						"name": "packet",
						"type": "bytes"
					}
				]
			}

		}

	}

}
