# Hub-Node Communication 1

**Jump to**: [Endianness](#endianness), [Packets](#packets), [Types](#types)

**Released**: January 25th, 2017

Protocol used for the communication between an hub and multiple nodes with support for Minecraft and Minecraft: Pocket Edition and different versions of their protocols.

## Definitions

### Hub

The hub (server) is the network part of the game server and handles pings, login sequences, keep alive packets, queries, external consoles and everything else that is not a gameplay feature.

A server can work with only an hub (nodeless) but every player that will try to join the server will be disconnected with an "End of Stream" message after the login process.

### Node

The node (client) is the gameplay part of the game server. It contains worlds and entities and has only one network connection, with the hub.

## Connection

Hncom uses a packet-oriented TCP connection and every packet is prefixed with a little-endian unsigned 32-bits integer, without any exception.

### Authentication

The node starts the connection sending a [ConnectionRequest](#login.connection-request) packet with its credentials and waits for a [ConnectionResponse](#login.connection-response) packet.

--------

## Endianness

Endianness | Types
---|---
big endian | ushort, float
little endian | 

--------

## Packets

Section | Packets
---|:---:
[Login](#login) | 4
[Status](#status) | 10
[Player](#player) | 11

### Login

Packets used during the authentication process to exchange informations.

Packet | DEC | HEX | Clientbound | Serverbound
---|:---:|:---:|:---:|:---:
[Connection Request](#login.connection-request) | 0 | 0 |  | ✓
[Connection Response](#login.connection-response) | 1 | 1 | ✓ | 
[Hub Info](#login.hub-info) | 2 | 2 | ✓ | 
[Node Info](#login.node-info) | 3 | 3 |  | ✓

<a name="login.connection-request"></a>
* ### Connection Request

	**ID**: 0

	**Clientbound**: no

	**Serverbound**: yes

	First real packet sent by the client with its informations.

	**Fields**:

	Name | Type
	---|---
	[protocol](#login.connection-request.protocol) | varuint
	[password](#login.connection-request.password) | string
	[name](#login.connection-request.name) | string
	[main](#login.connection-request.main) | bool

	* <a name="login.connection-request.protocol"></a>**protocol**

		Version of the protocol used by the client that must match the hub's one

	* <a name="login.connection-request.password"></a>**password**

		Password, if the hub requires one, or an empty string.

	* <a name="login.connection-request.name"></a>**name**

		Name of the node that will be validated by the hub. It should always be lowercase and only contain letters, numbers and basic punctuation symbols.

	* <a name="login.connection-request.main"></a>**main**

		Indicates whether the node accepts clients when they first connect to the hub or exclusively when they are manually transferred.


<a name="login.connection-response"></a>
* ### Connection Response

	**ID**: 1

	**Clientbound**: yes

	**Serverbound**: no

	Reply always sent after the [ConnectionRequest](#login.connection-request) packet. It indicates the status of the connection, which is accepted only when every field of the packet is true.

	**Fields**:

	Name | Type
	---|---
	[protocol](#login.connection-response.protocol) | varuint
	[status](#login.connection-response.status) | ubyte

	* <a name="login.connection-response.protocol"></a>**protocol**

		Protocol used by the hub. It must match the node's one otherwise the connection cannot be established.

	* <a name="login.connection-response.status"></a>**status**

		Indicates the status of connection. If not 0, it indicates an error.

		**Constants**:

		Name | Value | |
		---|:---:|---
		ok | 0 | 
		outdatedHub | 1 | The hub uses an old version of hncom
		outdatedNode | 2 | The node uses an old version of hncom
		passwordRequired | 3 | A password is required to connect
		wrongPassword | 4 | The password doesn't match the hub's
		invalidNameLength | 5 | The name is too short or too long
		invalidNameCharacters | 6 | The name contains invalid characters
		nameAlreadyUsed | 7 | There's already a node connected with the same name
		nameReserved | 8 | The name cannot be used because the hub has reserved it for something else


<a name="login.hub-info"></a>
* ### Hub Info

	**ID**: 2

	**Clientbound**: yes

	**Serverbound**: no

	Informations about the hub.

	**Fields**:

	Name | Type
	---|---
	[time](#login.hub-info.time) | varulong
	[serverId](#login.hub-info.server-id) | varulong
	[reservedUuids](#login.hub-info.reserved-uuids) | varulong
	[displayName](#login.hub-info.display-name) | string
	[onlineMode](#login.hub-info.online-mode) | bool
	[gamesInfo](#login.hub-info.games-info) | [gameInfo](#types.game-info)[]
	[online](#login.hub-info.online) | varuint
	[max](#login.hub-info.max) | varint
	[language](#login.hub-info.language) | string
	[acceptedLanguages](#login.hub-info.accepted-languages) | string[]
	[socialJson](#login.hub-info.social-json) | string
	[additionalJson](#login.hub-info.additional-json) | string

	* <a name="login.hub-info.time"></a>**time**

		Unix time in microseconds precision that indicates the exact moment when this packet was created. It's used by the node to calculate the latency.

	* <a name="login.hub-info.server-id"></a>**serverId**

		Server's id, either given by a snoop system or randomly generated at runtime.

	* <a name="login.hub-info.reserved-uuids"></a>**reservedUuids**

		First number of the 4.294.967.296 reserved by the hub to compose node's UUIDs. Every UUID generated by the node is formed by the server's id (most signicant) and the next reserved uuid (least significant). This way every UUID in the hub and in the connected nodes is always different.

	* <a name="login.hub-info.display-name"></a>**displayName**

		Unformatted name of the server as indicated in the hub's configuration file.

	* <a name="login.hub-info.online-mode"></a>**onlineMode**

		Indicates whether the player are authenticated using the games' official authentication services and their identity should be trusted.

	* <a name="login.hub-info.games-info"></a>**gamesInfo**

		Informations about the games supported by the hub.

	* <a name="login.hub-info.online"></a>**online**

		Number of players currently online and connected to other nodes.

	* <a name="login.hub-info.max"></a>**max**

		Number of maximum players that can connect to the server. The number may change after this node connects.

		**Constants**:

		Name | Value
		---|:---:
		unlimited | -1

	* <a name="login.hub-info.language"></a>**language**

		Default server's language in format (language_COUNTRY, e.g. en_GB) and also the default language for players that don't specify their language or for the ones which language is not supported by the server.

	* <a name="login.hub-info.accepted-languages"></a>**acceptedLanguages**

		Languages accepted by the server in the same format as [language](#login.hub-info.language). The list should always contain at least one element (the default language).

	* <a name="login.hub-info.social-json"></a>**socialJson**

		Optional informations about the server's website and social accounts in the format indicated below.
		
		```json
		{
		   "website": "example.com",
		   "facebook": "example-official",
		   "twitter": "example_tweets",
		   "youtube": "examplechannel",
		   "instagram": "example",
		   "google_plus": "example-plus"
		}
		```

	* <a name="login.hub-info.additional-json"></a>**additionalJson**

		Optional informations about the server's software, system and options in the format indicated below.
		
		```json
		{
		   "software": {
		      "name": "SEL",
		      "version": "1.0.4",
		      "stable": true
		   },
		   "minecraft": {
		      "edu": false,
		      "realm": true
		   },
		   "system": {
		      "os": "Ubuntu 16.04",
		      "cpu": "Intel(R) Core(TM) i5-5200U CPU @ 2.20GHz",
		      "cores": 2,
		      "ram": 2147483648
		   }
		}
		```


<a name="login.node-info"></a>
* ### Node Info

	**ID**: 3

	**Clientbound**: no

	**Serverbound**: yes

	Informations about the node.

	**Fields**:

	Name | Type
	---|---
	[time](#login.node-info.time) | varulong
	[max](#login.node-info.max) | varuint
	[acceptedGames](#login.node-info.accepted-games) | [game](#types.game)[]
	[plugins](#login.node-info.plugins) | [plugin](#types.plugin)[]
	[additionalJson](#login.node-info.additional-json) | string

	* <a name="login.node-info.time"></a>**time**

		Unix time in microseconds precision that indicates the exact moment when this packet was created. It's used by the hub to calculate the latency.

	* <a name="login.node-info.max"></a>**max**

		Maximum number of players accepted by node.

		**Constants**:

		Name | Value
		---|:---:
		unlimited | 0

	* <a name="login.node-info.accepted-games"></a>**acceptedGames**

		Informations about the games accepted by the node. There should be at least one combination of game/protocol that is also accepted by hub as indicated in [HubInfo.gamesInfo](#login.hub-info.games-info), otherwise the node will never receive any player.

	* <a name="login.node-info.plugins"></a>**plugins**

		List of plugins loaded on the node for creating queries on the hub.

	* <a name="login.node-info.additional-json"></a>**additionalJson**

		Optional informations about the server's software and system, similar to [HubInfo.additionalJson](#login.hub-info.additional-json).
		
		```json
		{
		   "software": {
		      "name": "SEL",
		      "version": "1.0.4",
		      "stable": true
		   },
		   "system": {
		      "os": "Windows 10",
		      "cpu": "Intel(R) Core(TM) i7-5700U CPU @ 3.40GHz",
		      "cores": 4,
		      "ram": 8589934592
		   }
		}
		```


### Status

Node-related packets and updates.

Packet | DEC | HEX | Clientbound | Serverbound
---|:---:|:---:|:---:|:---:
[Add Node](#status.add-node) | 4 | 4 | ✓ | 
[Remove Node](#status.remove-node) | 5 | 5 | ✓ | 
[Message Serverbound](#status.message-serverbound) | 6 | 6 |  | ✓
[Message Clientbound](#status.message-clientbound) | 7 | 7 | ✓ | 
[Players](#status.players) | 8 | 8 | ✓ | 
[Resources Usage](#status.resources-usage) | 9 | 9 |  | ✓
[Log](#status.log) | 10 | A |  | ✓
[Remote Command](#status.remote-command) | 11 | B | ✓ | 
[Update List](#status.update-list) | 12 | C |  | ✓
[Reload](#status.reload) | 13 | D | ✓ | 

<a name="status.add-node"></a>
* ### Add Node

	**ID**: 4

	**Clientbound**: yes

	**Serverbound**: no

	Notifies the node that another node (that is not itelf) has connected to the hub.

	**Fields**:

	Name | Type
	---|---
	[hubId](#status.add-node.hub-id) | varuint
	[name](#status.add-node.name) | string
	[main](#status.add-node.main) | bool
	[acceptedGames](#status.add-node.accepted-games) | [game](#types.game)[]

	* <a name="status.add-node.hub-id"></a>**hubId**

		Identifier given by the hub to uniquey identify the node.

	* <a name="status.add-node.name"></a>**name**

		Node's name used for displaying and identification purposes.

	* <a name="status.add-node.main"></a>**main**

		Whether the node is a main node (see [ConnectionRequest.main](#login.connection-request.main)).

	* <a name="status.add-node.accepted-games"></a>**acceptedGames**

		Indicates the game accepted by the node.


<a name="status.remove-node"></a>
* ### Remove Node

	**ID**: 5

	**Clientbound**: yes

	**Serverbound**: no

	Notifies the node that another node, previously added with [AddNode](#status.add-node) has disconnected from the hub.

	**Fields**:

	Name | Type
	---|---
	[hubId](#status.remove-node.hub-id) | varuint

	* <a name="status.remove-node.hub-id"></a>**hubId**

		Node's id given by the hub.


<a name="status.message-serverbound"></a>
* ### Message Serverbound

	**ID**: 6

	**Clientbound**: no

	**Serverbound**: yes

	Sends a binary message to some selected nodes or broadcast it.

	**Fields**:

	Name | Type
	---|---
	[addressees](#status.message-serverbound.addressees) | varuint[]
	[payload](#status.message-serverbound.payload) | ubyte[]

	* <a name="status.message-serverbound.addressees"></a>**addressees**

		Addressees of the message. If the array is empty the message is broadcasted to every connected node.

	* <a name="status.message-serverbound.payload"></a>**payload**

		Bytes to be sent/broadcasted. It may be a serialised packet of a plugin-defined protocol.


<a name="status.message-clientbound"></a>
* ### Message Clientbound

	**ID**: 7

	**Clientbound**: yes

	**Serverbound**: no

	Receives a binary message sent by another node using [MessageServerbound](#status.message-serverbound).

	**Fields**:

	Name | Type
	---|---
	[sender](#status.message-clientbound.sender) | varuint
	[payload](#status.message-clientbound.payload) | ubyte[]

	* <a name="status.message-clientbound.sender"></a>**sender**

		Id of the node that has sent the message.

	* <a name="status.message-clientbound.payload"></a>**payload**

		Bytes received. It could be a serialised packet of a plugin-defined packet.


<a name="status.players"></a>
* ### Players

	**ID**: 8

	**Clientbound**: yes

	**Serverbound**: no

	Updates the number of players on the server.

	**Fields**:

	Name | Type
	---|---
	[online](#status.players.online) | varuint
	[max](#status.players.max) | varint

	* <a name="status.players.online"></a>**online**

		Players currently online in the whole server (connected to a node).

	* <a name="status.players.max"></a>**max**

		Maximum number of players that can connect to server.

		**Constants**:

		Name | Value
		---|:---:
		unlimited | -1


<a name="status.resources-usage"></a>
* ### Resources Usage

	**ID**: 9

	**Clientbound**: no

	**Serverbound**: yes

	Updates the usage of the system's resources of the node.

	**Fields**:

	Name | Type
	---|---
	[tps](#status.resources-usage.tps) | float
	[ram](#status.resources-usage.ram) | varulong
	[cpu](#status.resources-usage.cpu) | float

	* <a name="status.resources-usage.tps"></a>**tps**

		Ticks per second of the node, in the range 0 to 20, where a number lower than 20 indicates lag.

	* <a name="status.resources-usage.ram"></a>**ram**

		RAM used by the node in bytes.

	* <a name="status.resources-usage.cpu"></a>**cpu**

		Percentage of CPU used by the node. It may be higher than 100 if the node has more than 1 CPU.


<a name="status.log"></a>
* ### Log

	**ID**: 10

	**Clientbound**: no

	**Serverbound**: yes

	Sends a log to the hub.

	**Fields**:

	Name | Type
	---|---
	[timestamp](#status.log.timestamp) | varulong
	[logger](#status.log.logger) | string
	[message](#status.log.message) | string
	[commandId](#status.log.command-id) | varint

	* <a name="status.log.timestamp"></a>**timestamp**

		Unix time (in milliseconds) that indicates the exact creation time of the log.

	* <a name="status.log.logger"></a>**logger**

		Name of the logger (world, plugin or module/packet) thas has generated the log.

	* <a name="status.log.message"></a>**message**

		Logged message. It may contain Minecraft formatting codes.

	* <a name="status.log.command-id"></a>**commandId**

		Identifier of the command that has generated the output or -1 if the log wasn't generated by a command.


<a name="status.remote-command"></a>
* ### Remote Command

	**ID**: 11

	**Clientbound**: yes

	**Serverbound**: no

	Executes a command on the node.

	**Fields**:

	Name | Type | When
	---|---|:---
	[origin](#status.remote-command.origin) | ubyte | 
	[sender](#status.remote-command.sender) | [address](#types.address) | `origin` is not equal to `0`
	[command](#status.remote-command.command) | string | 
	[commandId](#status.remote-command.command-id) | varint | 

	* <a name="status.remote-command.origin"></a>**origin**

		Origin of the command. It could be the hub itself or an external source.

		**Constants**:

		Name | Value
		---|:---:
		hub | 0
		externalConsole | 1
		rcon | 2

	* <a name="status.remote-command.sender"></a>**sender**

		Address of the sender if the command has been sent from an external source and not the hub.

	* <a name="status.remote-command.command"></a>**command**

		Commands and arguments that should be executed on the node. For example `say hello world` or `transfer steve lobby12`.

	* <a name="status.remote-command.command-id"></a>**commandId**

		Identifier of the command. It's sent in [Log.commandId](#status.log.command-id) if the command generates an output.


<a name="status.update-list"></a>
* ### Update List

	**ID**: 12

	**Clientbound**: no

	**Serverbound**: yes

	Updates a list.

	**Fields**:

	Name | Type
	---|---
	[list](#status.update-list.list) | ubyte
	[action](#status.update-list.action) | ubyte
	type | ubyte

	* <a name="status.update-list.list"></a>**list**

		Type of the list to update.

		**Constants**:

		Name | Value
		---|:---:
		whitelist | 0
		blacklist | 1

	* <a name="status.update-list.action"></a>**action**

		**Constants**:

		Name | Value
		---|:---:
		add | 0
		remove | 1


	**Variants**:

	Variant | Field | Value
	---|---|:---:
	[By Hub Id](#status.update-list.by-hub-id) | type | 0
	[By Name](#status.update-list.by-name) | type | 1
	[By Uuid](#status.update-list.by-uuid) | type | 2

	* <a name="status.update-list.by-hub-id"></a>**By Hub Id**

		**Additional Fields**:

		Name | Type
		---|---
		hubId | varuint


	* <a name="status.update-list.by-name"></a>**By Name**

		**Additional Fields**:

		Name | Type
		---|---
		username | string


	* <a name="status.update-list.by-uuid"></a>**By Uuid**

		**Additional Fields**:

		Name | Type
		---|---
		[game](#status.update-list.by-uuid.game) | ubyte
		uuid | uuid

		* <a name="status.update-list.by-uuid.game"></a>**game**

			**Constants**:

			Name | Value
			---|:---:
			pocket | 1
			minecraft | 2


<a name="status.reload"></a>
* ### Reload

	**ID**: 13

	**Clientbound**: yes

	**Serverbound**: no

	Notifies the node that the hub's reloadeable settings have been reloaded and that the node should also reload its resources (for example plugin's settings).

### Player

Packets related to a player. The first field of every packet is an hubId that uniquely identifies a player in the hub and never changes during the session.

Packet | DEC | HEX | Clientbound | Serverbound
---|:---:|:---:|:---:|:---:
[Add](#player.add) | 14 | E | ✓ | 
[Remove](#player.remove) | 15 | F | ✓ | 
[Kick](#player.kick) | 16 | 10 |  | ✓
[Transfer](#player.transfer) | 17 | 11 |  | ✓
[Update Language](#player.update-language) | 18 | 12 |  | ✓
[Update Display Name](#player.update-display-name) | 19 | 13 |  | ✓
[Update World](#player.update-world) | 20 | 14 |  | ✓
[Update Latency](#player.update-latency) | 21 | 15 | ✓ | 
[Update Packet Loss](#player.update-packet-loss) | 22 | 16 | ✓ | 
[Game Packet](#player.game-packet) | 23 | 17 | ✓ | ✓
[Ordered Game Packet](#player.ordered-game-packet) | 24 | 18 |  | ✓

<a name="player.add"></a>
* ### Add

	**ID**: 14

	**Clientbound**: yes

	**Serverbound**: no

	Adds a player to the node.

	**Fields**:

	Name | Type | When
	---|---|:---
	hubId | varuint | 
	[reason](#player.add.reason) | ubyte | 
	[type](#player.add.type) | ubyte | 
	[protocol](#player.add.protocol) | varuint | 
	[version](#player.add.version) | string | 
	[username](#player.add.username) | string | 
	[displayName](#player.add.display-name) | string | 
	[dimension](#player.add.dimension) | byte | `reason` is not equal to `0`
	[clientAddress](#player.add.client-address) | [address](#types.address) | 
	[serverAddress](#player.add.server-address) | string | 
	[serverPort](#player.add.server-port) | ushort | 
	[uuid](#player.add.uuid) | uuid | 
	[skin](#player.add.skin) | [skin](#types.skin) | 
	[latency](#player.add.latency) | varuint | 
	[language](#player.add.language) | string | 

	* <a name="player.add.reason"></a>**reason**

		Reason why the player has joined the node.

		**Constants**:

		Name | Value | |
		---|:---:|---
		firstJoin | 0 | The player has been automatically put on this node because it's a non-full main node
		transferred | 1 | The player has been transferred to this node
		forciblyTransferred | 2 | The player was on a node that has wrongly disconnected (probably crashing) and the player has been transferred to the first non-full main node

	* <a name="player.add.type"></a>**type**

		Game of the client, which could either be Minecraft or Minecraft: Pocket Edition.

	* <a name="player.add.protocol"></a>**protocol**

		Version of the protocol used by the client.

	* <a name="player.add.version"></a>**version**

		Version of the game used by the client, usually in the format major.minor[.patch], calculated by the server or passed by the client during the authentication process. The node should verify that the version exists and matches the protocol in the previous field.

	* <a name="player.add.username"></a>**username**

		Username of the player.

	* <a name="player.add.display-name"></a>**displayName**

		Display name of the player, which can contain formatting codes. By default it's equals to the username but it can be updated by the node using [UpdateDisplayName](#player.update-display-name).

	* <a name="player.add.dimension"></a>**dimension**

		Dimension in which the player was playing before being transferred. It could diffent from client's game type and version because the dimension's ids are different in Minecraft and Minecraft: Pocket Edition.
		
		It's used to send the game's change dimension packet to despawn old entities and delete old chunks.

	* <a name="player.add.client-address"></a>**clientAddress**

		Remote address of the client.

	* <a name="player.add.server-address"></a>**serverAddress**

		Ip used by the client to connect to the server. The value of this field is the address the client has saved in its servers list. For example a client that joins through `localhost` and a client that joins through `127.0.0.1` will connect to the same server but the field of this value will be different (`localhost` for the first client and `127.0.0.1` for the second).

	* <a name="player.add.server-port"></a>**serverPort**

		Port used by the client to connect to the server.

	* <a name="player.add.uuid"></a>**uuid**

		Client's UUID, given by Mojang's or Microsoft's services if the server is in online mode or given by the client (and not verified) if the server is in offline mode.

	* <a name="player.add.skin"></a>**skin**

		Client's skin, given by the client or downloaded from Mojang's services in online mode.

	* <a name="player.add.latency"></a>**latency**

		Client's latency (ping time).

	* <a name="player.add.language"></a>**language**

		Client's language, in the same format as [HubInfo.language](#login.hub-info.language), which should be updated from the node when the client changes it.


	**Variants**:

	Variant | Field | Value
	---|---|:---:
	[Pocket](#player.add.pocket) | type | 1
	[Minecraft](#player.add.minecraft) | type | 2

	* <a name="player.add.pocket"></a>**Pocket**

		A Minecraft: Pocket Edition client.

		**Additional Fields**:

		Name | Type
		---|---
		[xuid](#player.add.pocket.xuid) | varlong
		[edu](#player.add.pocket.edu) | bool
		[packetLoss](#player.add.pocket.packet-loss) | float
		[deviceOs](#player.add.pocket.device-os) | ubyte
		[deviceModel](#player.add.pocket.device-model) | string

		* <a name="player.add.pocket.xuid"></a>**xuid**

			XBOX Live id, which is a unique identifier for authenticated players or 0 if the server is in offline mode.

		* <a name="player.add.pocket.edu"></a>**edu**

			Indicates whether the client is using the [Education Edition](https://education.minecraft.net) variant of the game.

		* <a name="player.add.pocket.packet-loss"></a>**packetLoss**

			Client's packet loss calculated from the hub in the range 0 (no packet lost) to 100 (every packet lost).

		* <a name="player.add.pocket.device-os"></a>**deviceOs**

			Client's operative system, if supplied by the client. This field's value may be used to divide players that play from a phone from players that play on a computer.

			**Constants**:

			Name | Value
			---|:---:
			unknown | 0
			android | 2

		* <a name="player.add.pocket.device-model"></a>**deviceModel**

			Client's device model, if supplied by the client. This field is usually a string in the format `MANUFACTURES MODEL`: for example, the Oneplus one is `ONEPLUS A0001`. This field's value may be used to exclude devices with bad performances.


	* <a name="player.add.minecraft"></a>**Minecraft**

		A Minecraft client. Currently there are no additional fields.

<a name="player.remove"></a>
* ### Remove

	**ID**: 15

	**Clientbound**: yes

	**Serverbound**: no

	Removes a player from the node. If the player is removed from the node using [Kick](#player.kick) or [Transfer](#player.transfer) this packet is not sent.

	**Fields**:

	Name | Type
	---|---
	hubId | varuint
	[reason](#player.remove.reason) | ubyte

	* <a name="player.remove.reason"></a>**reason**

		Reason of the disconnection.

		**Constants**:

		Name | Value | |
		---|:---:|---
		left | 0 | 
		timedOut | 1 | Kicked due to timeout
		kicked | 2 | Kicked by the hub
		transferred | 3 | Transferred by the hub


<a name="player.kick"></a>
* ### Kick

	**ID**: 16

	**Clientbound**: no

	**Serverbound**: yes

	Kicks a player from the node and the whole server. When a player is disconnected from the node using this packet the hub will not send the [Remove](#player.remove) packet.

	**Fields**:

	Name | Type | When
	---|---|:---
	hubId | varuint | 
	[reason](#player.kick.reason) | string | 
	[translation](#player.kick.translation) | bool | 
	[parameters](#player.kick.parameters) | string[] | `translation` is `true`

	* <a name="player.kick.reason"></a>**reason**

		Reason of the disconnection that will be displayed in the client's disconnection screen.

	* <a name="player.kick.translation"></a>**translation**

		Whether the previous string should be translated client-side or not.

	* <a name="player.kick.parameters"></a>**parameters**

		Optional parameters for the translation.


<a name="player.transfer"></a>
* ### Transfer

	**ID**: 17

	**Clientbound**: no

	**Serverbound**: yes

	Transfers a player to another node. When a player is transferred from the node the hub will not send the [Remove](#login.remove) packet and there's no way, for the node, to know whether the player was disconnected or successfully transferred, if not using messages through a user-defined protocol.

	**Fields**:

	Name | Type
	---|---
	hubId | varuint
	[node](#player.transfer.node) | varuint
	[onFail](#player.transfer.on-fail) | ubyte

	* <a name="player.transfer.node"></a>**node**

		Id of the node that player will be transferred to. It should be an id of a connected node (which can be calculated using [AddNode](#status.add-node) and [RemoveNode](#status.remove-node)), otherwise the player will be disconnected or moved to another node (see the following field).

	* <a name="player.transfer.on-fail"></a>**onFail**

		Indicates the action to be taken when a transfer fails because the indicated node is not connected anymore or it cannot accept the given player's game type or protocol. If the indicated node is full the player will be simply disconnected with the `Server Full` message.

		**Constants**:

		Name | Value | |
		---|:---:|---
		disconnect | 0 | Disconnects with `End of Stream` message
		auto | 1 | Connects to the first available node or disconnects if there isn't one
		reconnect | 2 | Connects to this node, but as a new player


<a name="player.update-language"></a>
* ### Update Language

	**ID**: 18

	**Clientbound**: no

	**Serverbound**: yes

	Updates the player's language when the client changes it.

	**Fields**:

	Name | Type
	---|---
	hubId | varuint
	[language](#player.update-language.language) | string

	* <a name="player.update-language.language"></a>**language**

		Player's language in the same format as [HubInfo.language](#login.hub-info.language).


<a name="player.update-display-name"></a>
* ### Update Display Name

	**ID**: 19

	**Clientbound**: no

	**Serverbound**: yes

	Updates the player's display name when it changes.

	**Fields**:

	Name | Type
	---|---
	hubId | varuint
	[displayName](#player.update-display-name.display-name) | string

	* <a name="player.update-display-name.display-name"></a>**displayName**

		Player's display name that can contain formatting codes. Prefixes and suffixes should be avoided.


<a name="player.update-world"></a>
* ### Update World

	**ID**: 20

	**Clientbound**: no

	**Serverbound**: yes

	Updates player's world and dimension.

	**Fields**:

	Name | Type
	---|---
	hubId | varuint
	[world](#player.update-world.world) | string
	[dimension](#player.update-world.dimension) | byte

	* <a name="player.update-world.world"></a>**world**

		World's name, used mainly for display purposes.

	* <a name="player.update-world.dimension"></a>**dimension**

		World's dimension, that may different from Minecraft's version. It used for synchronise entities and chunks when changing node as described at [Add.dimension](#player.add.dimension).


<a name="player.update-latency"></a>
* ### Update Latency

	**ID**: 21

	**Clientbound**: yes

	**Serverbound**: no

	Updates the player's latenct with the hub.

	**Fields**:

	Name | Type
	---|---
	hubId | varuint
	[latency](#player.update-latency.latency) | varuint

	* <a name="player.update-latency.latency"></a>**latency**

		Player's latency in milliseconds. The latency between the client and the node is then calculated adding the latency between the node and the hub (calculated using [HubInfo.time](#login.hub-info.time)) to this field's value.


<a name="player.update-packet-loss"></a>
* ### Update Packet Loss

	**ID**: 22

	**Clientbound**: yes

	**Serverbound**: no

	Updates the player's packet loss if it uses a connectionless protocol.

	**Fields**:

	Name | Type
	---|---
	hubId | varuint
	[packetLoss](#player.update-packet-loss.packet-loss) | float

	* <a name="player.update-packet-loss.packet-loss"></a>**packetLoss**

		Percentage of lost packets in range 0 (no packet lost) to 100 (every packet lost).


<a name="player.game-packet"></a>
* ### Game Packet

	**ID**: 23

	**Clientbound**: yes

	**Serverbound**: yes

	Sends data to client or handles data received from the client.

	**Fields**:

	Name | Type
	---|---
	hubId | varuint
	[packet](#player.game-packet.packet) | bytes

	* <a name="player.game-packet.packet"></a>**packet**

		Serialised packet ready to be encrypted or encapsulated and sent to the client.
		
		#### Format
		
		##### Minecraft (serverbound)
		
		The packet is prefixed with a varuint-encoded 0 if the packet is not compressed or with the uncompressed packet's length encoded as a varuint if the packet is compressed.
		
		##### Minecraft (clientbound)
		
		The packet is already unencrypted and uncompressed and ready to be handled as a serverbound packet.
		
		##### Minecraft: Pocket Edition (serverbound)
		
		The packet is simply encoded (may be compressed in a Batch packet) and ready to be encapsulated using RakNet.
		
		##### Minecraft: Pocket Edition (clientbound)
		
		The packet is already unencrypted and uncompressed if it was a Batch packet and ready to be handled as a serverbound packet.


<a name="player.ordered-game-packet"></a>
* ### Ordered Game Packet

	**ID**: 24

	**Clientbound**: no

	**Serverbound**: yes

	Sends data to the client but order it because it could be sent by the node unordered, due to compressed packet sent delayed.

	**Fields**:

	Name | Type
	---|---
	hubId | varuint
	[order](#player.ordered-game-packet.order) | varuint
	[packet](#player.ordered-game-packet.packet) | bytes

	* <a name="player.ordered-game-packet.order"></a>**order**

		Order of the packet. If the hub receives a packet with an id different from 0 or the latest ordered packet's order + 1 it should wait for the packets with the missing order(s) before sending.

	* <a name="player.ordered-game-packet.packet"></a>**packet**

		Serialised packet (see [GamePacket.packet](#player.game-packet.packet)).


--------

## Types

**Jump to**: [Address](#types.address), [Game](#types.game), [Game Info](#types.game-info), [Plugin](#types.plugin), [Skin](#types.skin)

<a name="types.address"></a>
* ### Address

	Internet protocol address. Could be either version 4 or 6.

	**Fields**:

	Name | Type
	---|---
	[bytes](#address.bytes) | ubyte[]
	[port](#address.port) | ushort

	* <a name="address.bytes"></a>**bytes**

		Bytes of the address. The length may be 4 (for ipv4 addresses) or 16 (for ipv6 addresses). The byte order is always big-endian (network order).

	* <a name="address.port"></a>**port**

		Port of the address.


<a name="types.game"></a>
* ### Game

	Indicates a game and informations about its accepted protocols.

	**Fields**:

	Name | Type
	---|---
	[type](#game.type) | ubyte
	[protocols](#game.protocols) | varuint[]

	* <a name="game.type"></a>**type**

		Identifier of the game.

		**Constants**:

		Name | Value
		---|:---:
		pocket | 1
		minecraft | 2

	* <a name="game.protocols"></a>**protocols**

		Protocols accepted by the server for the game. They should be ordered from oldest to newest.


<a name="types.game-info"></a>
* ### Game Info

	Indicates a game and informations about it.

	**Fields**:

	Name | Type
	---|---
	[game](#game-info.game) | [game](#types.game)
	[motd](#game-info.motd) | string
	[port](#game-info.port) | ushort

	* <a name="game-info.game"></a>**game**

		Informations about the the game and the protocols used.

	* <a name="game-info.motd"></a>**motd**

		"Message of the day" which is displayed in the game's server list. It may contain Minecraft formatting codes.

	* <a name="game-info.port"></a>**port**

		Port, or main port if the server allows the connection from multiple ports, where the socket is listening for connections.


<a name="types.plugin"></a>
* ### Plugin

	A plugin loaded on the node. It may be used by the hub to display the plugins loaded on the server in queries.

	**Fields**:

	Name | Type
	---|---
	[name](#plugin.name) | string
	[version](#plugin.version) | string

	* <a name="plugin.name"></a>**name**

		Name of the plugin.

	* <a name="plugin.version"></a>**version**

		Version of the plugin, usually in the format `major.minor[.release] [alpha|beta]`.


<a name="types.skin"></a>
* ### Skin

	Player's skin to be sent to Minecraft: Pocket Edition clients.
	
	If the server only allows Minecraft player to connect the following fields should be empty.

	**Fields**:

	Name | Type
	---|---
	[name](#skin.name) | string
	[data](#skin.data) | ubyte[]

	* <a name="skin.name"></a>**name**

		Name of the skin.

	* <a name="skin.data"></a>**data**

		RGBA map of the skin colours. Length should be, if the skin is not empty, 8192 or 16384.


