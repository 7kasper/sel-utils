# Raknet 8

**Released**: August 16th, 2011

In use since **Alpha 0.1.0**

Minecraft: Pocket Edition's networking protocol.

## Endianness

all: Big Endian

triad: Little Endian

--------

## Packets

Section | Packets
---|:---:
[Control](#control) | 3
[Unconnected](#unconnected) | 6
[Encapsulated](#encapsulated) | 7

### Control

Packet | DEC | HEX | Clientbound | Serverbound
---|:---:|:---:|:---:|:---:
[Ack](#ack) | 192 | C0 | ✓ | ✓
[Nack](#nack) | 160 | A0 | ✓ | ✓
[Encapsulated](#encapsulated) | 132 | 84 | ✓ | ✓

* ### Ack

	**ID**: 192

	**Clientbound**: yes

	**Serverbound**: yes

	**Fields**:

	* packets

		**Type**: [acknowledge](#acknowledge)[]


* ### Nack

	**ID**: 160

	**Clientbound**: yes

	**Serverbound**: yes

	**Fields**:

	* packets

		**Type**: [acknowledge](#acknowledge)[]


* ### Encapsulated

	**ID**: 132

	**Clientbound**: yes

	**Serverbound**: yes

	**Fields**:

	* count

		**Type**: triad

	* encapsulation

		**Type**: [encapsulation](#encapsulation)


### Unconnected

Packet | DEC | HEX | Clientbound | Serverbound
---|:---:|:---:|:---:|:---:
[Ping](#ping) | 1 | 1 |  | ✓
[Pong](#pong) | 28 | 1C | ✓ | 
[Open Connection Request 1](#open-connection-request-1) | 5 | 5 |  | ✓
[Open Connection Reply 1](#open-connection-reply-1) | 6 | 6 | ✓ | 
[Open Connection Request 2](#open-connection-request-2) | 7 | 7 |  | ✓
[Open Connection Reply 2](#open-connection-reply-2) | 8 | 8 | ✓ | 

* ### Ping

	**ID**: 1

	**Clientbound**: no

	**Serverbound**: yes

	**Fields**:

	* pingId

		**Type**: long

	* magic

		**Type**: ubyte[16]


* ### Pong

	**ID**: 28

	**Clientbound**: yes

	**Serverbound**: no

	**Fields**:

	* pingId

		**Type**: long

	* serverId

		**Type**: long

	* magic

		**Type**: ubyte[16]

	* status

		**Type**: string


* ### Open Connection Request 1

	**ID**: 5

	**Clientbound**: no

	**Serverbound**: yes

	**Fields**:

	* magic

		**Type**: ubyte[16]

	* protocol

		**Type**: ubyte

	* mtu

		**Type**: bytes


* ### Open Connection Reply 1

	**ID**: 6

	**Clientbound**: yes

	**Serverbound**: no

	**Fields**:

	* magic

		**Type**: ubyte[16]

	* serverId

		**Type**: long

	* security

		**Type**: bool

	* mtuLength

		**Type**: ushort


* ### Open Connection Request 2

	**ID**: 7

	**Clientbound**: no

	**Serverbound**: yes

	**Fields**:

	* magic

		**Type**: ubyte[16]

	* serveraddress

		**Type**: [address](#address)

	* mtuLength

		**Type**: ushort

	* clientId

		**Type**: long


* ### Open Connection Reply 2

	**ID**: 8

	**Clientbound**: yes

	**Serverbound**: no

	**Fields**:

	* magic

		**Type**: ubyte[16]

	* serverId

		**Type**: long

	* serverAddress

		**Type**: [address](#address)

	* mtuLength

		**Type**: ushort

	* security

		**Type**: bool


### Encapsulated

Packet | DEC | HEX | Clientbound | Serverbound
---|:---:|:---:|:---:|:---:
[Client Connect](#client-connect) | 9 | 9 |  | ✓
[Server Handshake](#server-handshake) | 16 | 10 | ✓ | 
[Client Handshake](#client-handshake) | 19 | 13 |  | ✓
[Client Cancel Connection](#client-cancel-connection) | 21 | 15 |  | ✓
[Ping](#ping) | 0 | 0 |  | ✓
[Pong](#pong) | 3 | 3 | ✓ | 
[Mcpe](#mcpe) | 254 | FE | ✓ | ✓

* ### Client Connect

	**ID**: 9

	**Clientbound**: no

	**Serverbound**: yes

	**Fields**:

	* clientId

		**Type**: long

	* pingId

		**Type**: long


* ### Server Handshake

	**ID**: 16

	**Clientbound**: yes

	**Serverbound**: no

	**Fields**:

	* clientAddress

		**Type**: [address](#address)

	* mtuLength

		**Type**: ushort

	* systemAddresses

		**Type**: [address](#address)[10]

	* pingId

		**Type**: long

	* serverId

		**Type**: long


* ### Client Handshake

	**ID**: 19

	**Clientbound**: no

	**Serverbound**: yes

	**Fields**:

	* clientAddress

		**Type**: [address](#address)

	* systemAddresses

		**Type**: [address](#address)[10]

	* pingId

		**Type**: long

	* clientId

		**Type**: long


* ### Client Cancel Connection

	**ID**: 21

	**Clientbound**: no

	**Serverbound**: yes

* ### Ping

	**ID**: 0

	**Clientbound**: no

	**Serverbound**: yes

	**Fields**:

	* time

		**Type**: long


* ### Pong

	**ID**: 3

	**Clientbound**: yes

	**Serverbound**: no

	**Fields**:

	* time

		**Type**: long


* ### Mcpe

	**ID**: 254

	**Clientbound**: yes

	**Serverbound**: yes

	**Fields**:

	* packet

		**Type**: bytes


--------

## Types

* ### Address

	**Fields**:

	* type

		**Type**: ubyte

	* ipv4

		**Type**: ubyte[4]

		**When**: type==4

	* ipv6

		**Type**: ubyte[16]

		**When**: type==6

	* port

		**Type**: ushort


* ### Acknowledge

	**Fields**:

	* unique

		**Type**: bool

	* first

		**Type**: triad

	* last

		**Type**: triad

		**When**: unique==false


* ### Encapsulation

	**Fields**:

	* info

		**Type**: ubyte

	* length

		**Type**: ushort

	* messageIndex

		**Type**: triad

		**When**: (info&0x7f)>=64

	* orderIndex

		**Type**: triad

		**When**: (info&0x7f)>=96

	* orderChannel

		**Type**: ubyte

		**When**: (info&0x7f)>=96

	* split

		**Type**: [split](#split)

		**When**: (info&0x10)!=0

	* payload

		**Type**: bytes


* ### Split

	**Fields**:

	* count

		**Type**: uint

	* id

		**Type**: ushort

	* order

		**Type**: uint


