# External Console 1

Protocol used by SEL to communicate with external sources using TCP or web sockets.

## Packets

Section | Packets
---|:---:
[Login](#login) | 3
[Status](#status) | 3
[Play](#play) | 3

### Login

Packet | DEC | HEX | Clientbound | Serverbound
---|:---:|:---:|:---:|:---:
[Auth Credentials](#auth-credentials) | 0 | 0 | ✓ | 
[Auth](#auth) | 1 | 1 |  | ✓
[Welcome](#welcome) | 2 | 2 | ✓ | 

#### Auth Credentials

Credentials for login.

Field | Type | Description
---|---|---
protocol | ubyte | Protocol used by the server. If the client uses a different one it should close the connection without sending any packet.
hashAlgorithm | string | Algorithm used by the server to match the the hash. If empty no hashing is done and the password is sent raw.
payload | ubyte[16] | Payload to add to the password encoded as UTF-8 (if hash algorithm is not empty) before hashing it.

#### Auth

Field | Type
---|---
hash | ubyte[]

#### Welcome

Field | Type
---|---
status | ubyte

### Status

Packet | DEC | HEX | Clientbound | Serverbound
---|:---:|:---:|:---:|:---:
[Keep Alive](#keep-alive) | 0 | 0 | ✓ | ✓
[Update Nodes](#update-nodes) | 1 | 1 | ✓ | 
[Update Stats](#update-stats) | 2 | 2 | ✓ | 

#### Keep Alive

Field | Type
---|---
count | uint

#### Update Nodes

Field | Type
---|---
action | ubyte
node | string

#### Update Stats

Field | Type
---|---
onlinePlayers | uint
maxPlayers | uint
uptime | uint
upload | uint
download | uint
nodes | [nodeStats](#node_stats)[]

### Play

Packet | DEC | HEX | Clientbound | Serverbound
---|:---:|:---:|:---:|:---:
[Console Message](#console-message) | 3 | 3 | ✓ | 
[Command](#command) | 4 | 4 |  | 
[Permission Denied](#permission-denied) | 5 | 5 | ✓ | 

#### Console Message

Logs a message from the server's console. It may be a result of a command, a debug message or any other message that the server retains able to be seen by the External Console.

Field | Type | Description
---|---|---
node | string | Name of the node that has created the log or an empty string if the log has been created by the hub or by a server implementation that isn't based on the hub-node structure.
timestamp | ulong | Unix timestamp in milliseconds that indicates the exact time when the log has been generated by the server.
logger | string | Name of the logger. It is the world name if the log has been generated by a world's message (like a broadcast or a chat message).
message | string | The logged message. It may contain Minecraft's formatting codes which should be translated into appropriate colours by the client-side implementation.

#### Command

Executes a command remotely if the server allows it. If not a [Permission Denied](#permission-denied) is sent back. The ideal client should never send this packet if remoteCommands field in [Welcome.Accepted](#accepted) is not true.

Field | Type | Description
---|---|---
command | string | Command to be executed on the server. On SEL servers it should start with a slash or a point (hub command) or a node name followed by the command (node command).

#### Permission Denied

Bodyless packet only sent in response to [Command](#command) when the server doesn't allow the execution of remote commands through the External Console protocol. The ideal client should never receive this packet avoiding the use of [Command](#command) if the remoteCommands field in [Welcome.Accepted](#accepted) is not true.

--------

### Types

#### Game

Field | Type
---|---
type | ubyte
protocols | uint[]

#### Node Stats

Field | Type
---|---
name | string
tps | float
ram | ulong
cpu | float

